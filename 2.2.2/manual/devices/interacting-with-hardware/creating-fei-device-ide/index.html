<!DOCTYPE html>
<html>
  <head>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.36.1" />
<title>Creating an FEI Device in the IDE :: REDHAWK</title>
<link rel="shortcut icon" href="../../../../images/favicon.png" type="image/x-icon" />
<link href="../../../../css/font-awesome.min.css" rel="stylesheet">
<link href="../../../../css/nucleus.css" rel="stylesheet">
<link href="../../../../theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="../../../../css/bootstrap.min.css">
<script src="../../../../js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/redhawksdr.github.io\/2.2.2\/";
</script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-114112954-1', 'auto');
ga('send', 'pageview');
</script>

<link rel="stylesheet" href="../../../../css/custom.css">
<script src="../../../../js/custom.js"></script>


    
  </head>
  <body data-url="/manual/devices/interacting-with-hardware/creating-fei-device-ide/">
    
      <header>
  <div class="logo">
    
	
  
    <p><a href="../../../../../"><img src="../../../../images/RedHawk_Logo_ALT_B_121px.png" alt="logo" /> REDHAWK</a></p>

  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://redhawksdr.github.io"  rel="noopener">
                  <i class='fa fa-home'></i> <label>Home</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/redhawksdr/redhawk/releases"  rel="noopener">
                  <i class='fa fa-download'></i> <label>Downloads</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/redhawksdr/docs"  rel="noopener">
                  <i class='fa fa-github'></i> <label>GitHub</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="../../../../">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/getting-started/" class="dd-item haschildren
        ">
      <div>
      <a href="../../../../getting-started/">Getting Started With REDHAWK</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/getting-started/process-management/" class="dd-item">
        <div>
          <a href="../../../../getting-started/process-management/">
            REDHAWK’s Approach to Process Management and Interaction
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/getting-started/getting-started/" class="dd-item">
        <div>
          <a href="../../../../getting-started/getting-started/">
            Getting Started
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/getting-started/ide-quickstart/" class="dd-item">
        <div>
          <a href="../../../../getting-started/ide-quickstart/">
            IDE Quickstart
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/getting-started/further-reading/" class="dd-item">
        <div>
          <a href="../../../../getting-started/further-reading/">
            Further Reading
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/manual/" class="dd-item parent alwaysopen haschildren
        ">
      <div>
      <a href="../../../../manual/">REDHAWK Manual - 2.2.2</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
        </ul>
    </li>




    </ul>
    <section><center>

<a class="github-button" href="https://github.com/redhawksdr/redhawk/releases" data-icon="octicon-cloud-download" aria-label="Download REDHAWK on GitHub">Download</a>


<a class="github-button" href="https://github.com/redhawksdr/redhawk" data-icon="octicon-star" data-show-count="true" aria-label="Star redhawksdr/redhawk on GitHub">Star</a>


<a class="github-button" href="https://github.com/redhawksdr/redhawk/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork redhawksdr/redhawk on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/getting-started/" >
   Getting Started With REDHAWK</option>
    <option value="/manual/" >
   REDHAWK Manual - 2.2.2</option> 
    <option value="/manual/installation/" >
  - 
   Installation</option>
    <option value="/manual/components/" >
  - 
   Components</option>
    <option value="/manual/component-structure/" >
  - 
   Component Structure</option>
    <option value="/manual/shared-libraries/" >
  - 
   Shared Libraries</option>
    <option value="/manual/connections/" >
  - 
   Connections</option>
    <option value="/manual/waveforms/" >
  - 
   Waveforms</option>
    <option value="/manual/services/" >
  - 
   Services</option>
    <option value="/manual/devices/" >
  - 
   Working with Devices</option> 
    <option value="/manual/devices/interacting-with-hardware/" >
  -- 
   Using Devices to Interact with Hardware</option> 
      <option value="/manual/devices/interacting-with-hardware/creating-fei-device-ide/"  selected>--- Creating an FEI Device in the IDE</option>
      <option value="/manual/devices/interacting-with-hardware/interacting-fei-device-python-package/" >--- Interacting with an FEI Device with the Python Package</option>
      <option value="/manual/devices/interacting-with-hardware/using-fei-device-ide/" >--- Using an FEI Device in the IDE</option>
  
      <option value="/manual/devices/associating-a-waveform/" >-- Associating a Waveform with an FEI Device</option>
      <option value="/manual/devices/running-components/" >-- Using Devices to Run Components</option>
      <option value="/manual/devices/interface-with-fpgas/" >-- Using Devices to Interface with FPGAs</option>
      <option value="/manual/devices/fei-data-structures/" >-- Functions and Data Structures Provided by the FrontEnd Interfaces Library and Code Generators</option>
      <option value="/manual/devices/misc/" >-- Miscellaneous FrontEnd Tuner Library Implementation Details</option>
  
    <option value="/manual/nodes/" >
  - 
   Nodes</option>
    <option value="/manual/sandbox/" >
  - 
   Sandbox</option>
    <option value="/manual/runtime-environment/" >
  - 
   The Runtime Environment</option>
    <option value="/manual/runtime-inspection/" >
  - 
   Runtime Environment Inspection</option>
    <option value="/manual/logging/" >
  - 
   Logging</option>
    <option value="/manual/ide/" >
  - 
   Using the REDHAWK IDE</option>
    <option value="/manual/exploring-sdrroot/" >
  - 
   Exploring SDRROOT Using the REDHAWK IDE</option>
    <option value="/manual/sharing-projects/" >
  - 
   Sharing REDHAWK Projects With Others</option>
    <option value="/manual/exploring-domain/" >
  - 
   Exploring a Running Domain Using the REDHAWK IDE</option>
    <option value="/manual/appendices/" >
  - 
   Appendices</option>
    <option value="/manual/glossary/" >
  - 
   Glossary</option>
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="../../../../js/lunr.min.js"></script>
        <script type="text/javascript" src="../../../../js/auto-complete.js"></script>
        <link href="../../../../css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/redhawksdr.github.io\/2.2.2\/";
          
        </script>
        <script type="text/javascript" src="../../../../js/search.js"></script>
      </div>
    

    <h2 class="title">Creating an FEI Device in the IDE</h2>

    
    
    
    

<h4 id="using-the-frontend-interfaces-fei-wizard-to-create-an-fei-device">Using the FrontEnd Interfaces (FEI) Wizard to Create an FEI Device</h4>

<p>The <strong>REDHAWK Front End Device Project</strong> wizard enables users to quickly create an FEI compliant receiver or transmitter <a href="../../../../manual/glossary/#device">device</a>. In the wizard, the user specifies the physical properties of the device, including whether the device ingests or outputs GPS and if the device has digital or analog input and output <a href="../../../../manual/glossary/#port">ports</a>. Additionally, the user can choose to augment the required tuner status <a href="../../../../manual/glossary/#property">properties</a> with additional optional properties.</p>

<ol>
<li><p>To open the wizard and create a new device, select <strong>File &gt; New &gt; Other</strong>.</p>

<p>The <strong>Select a wizard</strong> page is displayed:

<figure >
    
        <img src="../../images/NewFEIDeviceWizard1.png" alt="Select a Wizard Page" />
    
    
    <figcaption>
        <h5 class=figure >Select a Wizard Page</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>Select <strong>REDHAWK Front End Device Project</strong> and click <strong>Next</strong>.</p>

<p>The <strong>Create a REDHAWK Device Project</strong> page is displayed:

<figure >
    
        <img src="../../images/NewFEIDeviceWizard2.png" alt="Create a REDHAWK Device Project Page" />
    
    
    <figcaption>
        <h5 class=figure >Create a REDHAWK Device Project Page</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>In the <strong>Project name</strong> field, enter a project name and click <strong>Next</strong>.</p>

<p>The <strong>New Implementation</strong> page is displayed:

<figure >
    
        <img src="../../images/NewFEIDeviceWizard3.png" alt="New Implementation Page" />
    
    
    <figcaption>
        <h5 class=figure >New Implementation Page</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>Select the programming language; enter a description for this implementation; and click <strong>Next</strong>.</p>

<p>The <strong>Setup Code Generation</strong> page is displayed:

<figure >
    
        <img src="../../images/NewFEIDeviceWizard4.png" alt="The Setup Code Generation Page" />
    
    
    <figcaption>
        <h5 class=figure >Setup Code Generation Page</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>Click <strong>Next</strong>.</p>

<p>The <strong>FrontEnd Interfaces Device Type Selection</strong> page is displayed:

<figure >
    
        <img src="../../images/NewFEIDeviceWizard5.png" alt="The FrontEnd Interfaces Device Type Selection Page" />
    
    
    <figcaption>
        <h5 class=figure >FrontEnd Interfaces Device Type Selection Page</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>Select the appropriate aspects of the device (needs GPS data or produces GPS data) and its general usage (receive/transmit, scanning capability). Click <strong>Next</strong>.</p>

<p>The <strong>FrontEnd Interface Tuner Options</strong> page is displayed:

<figure >
    
        <img src="../../images/NewFEIDeviceWizard6.png" alt="The FrontEnd Interface Tuner Options Page" />
    
    
    <figcaption>
        <h5 class=figure >FrontEnd Interface Tuner Options Page</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>Specify the types of inputs and outputs that the device supports (analog, digital float) and click <strong>Next</strong>.</p>

<p>The <strong>FrontEnd Interfaces Tuner Status Customization</strong> page is displayed:

<figure >
    
        <img src="../../images/NewFEIDeviceWizard7.png" alt="The FrontEnd Interfaces Tuner Status Customization Page" />
    
    
    <figcaption>
        <h5 class=figure >FrontEnd Interfaces Tuner Status Customization Page</h5>
        
    </figcaption>
    
</figure>



</p>

<ul>
<li>To add an optional tuner status properties, click <strong>+</strong>, select the checkboxes for the properties, and click <strong>OK</strong>.</li>
<li>To remove optional tuner status properties, under <strong>Tuner Status Property Selection</strong>, select the properties to remove, and click <strong>X</strong>. If a required property is selected, the <strong>X</strong> button is disabled.</li>
<li>Click <strong>Finish</strong> to exit this wizard.</li>
</ul></li>
</ol>

<p>Upon exiting this wizard,the FEI device project to is created, and the Overview tab of the project is displayed:

<figure >
    
        <img src="../../images/FEIDevOverview.png" alt="The FEI Device Overview Tab" />
    
    
    <figcaption>
        <h5 class=figure >FEI Device Overview Tab</h5>
        
    </figcaption>
    
</figure>



</p>

<h4 id="editing-a-frontend-interfaces-device-project">Editing a FrontEnd Interfaces Device Project</h4>

<p>After completing the wizard, you can add ports, properties, and descriptions to an FEI device using the same processes used for all other <a href="../../../../manual/glossary/#component">components</a> and devices. For more information about adding ports, refer to <a href="../../../../manual/ide/editors-and-views/softpkg-editor/#overview-tab">SoftPkg Editor Overview Tab</a>. For more information about adding properties, refer to <a href="../../../../manual/ide/editors-and-views/softpkg-editor/#properties-tab">SoftPkg Editor Properties Tab</a></p>

<p>For example, it may be useful to add a property used to uniquely identify the target device, such as an IP address.</p>

<div class="notices note" ><p>When editing a FrontEnd Device Project:</p>

<ul>
<li>Do not rename properties that were generated using the wizard.</li>
<li>Do not modify the pre-populated values generated in the wizard (for example, the property, <code>device_kind</code>). You may, however, add default values to the properties without pre-populated values, such as <code>device_model</code>.</li>
<li>Do not change pre-defined FEI Tuner Status properties that were generated in the wizard. You may, however, add user-defined FEI Tuner Status properties.</li>
<li>Before adding user-defined FEI Tuner Status properties, check to see if relevant pre-defined FEI Tuner Status properties are already available. Use pre-defined FEI Tuner Status properties whenever possible.</li>
</ul>
</div>


<p>To add or remove optional FEI Tuner Status properties using the <strong>FrontEnd Interfaces Tuner Status Customization</strong> dialog, on the Overview tab of the project, click the <strong>Edit FrontEnd properties</strong> icon. The same dialog used to define the FEI device’s tuner status property on the creation wizard is displayed. Add or remove the properties and click <strong>Finish</strong>.</p>

<h4 id="generating-and-customizing-the-source-code">Generating and Customizing the Source Code</h4>

<ol>
<li><p>On the <strong>Overview</strong> tab for the project, click the <strong>Generate All Implementations</strong> icon to generate the source code.</p>

<p>The <strong>Regenerate Files</strong> dialog is displayed:

<figure >
    
        <img src="../../images/FEIRegenFiles.png" alt="The Regenerate Files Dialog" />
    
    
    <figcaption>
        <h5 class=figure >Regenerate Files Dialog</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>Select the files to be generated and click <strong>OK</strong>.</p>

<p>Files are generated that define the classes for the FEI device. In C++, the FEI base class inherits from the <code>frontend::FrontendTunerDevice</code> class  (or <code>frontend::FrontendScanningTunerDevice</code> for a scanner) to provide much of the FEI capability. The generated FEI device class must be modified to interact with the target device. During generation, intentional compiler warnings are inserted in the main class to indicate where code should be modified to reflect the behavior of the device. The output of the make command for a C++ device, including the compiler warnings, is displayed in the <a href="../../../../manual/glossary/#console-view">Console View</a>:

<figure >
    
        <img src="../../images/FEICompilerWarns.png" alt="FEI Device Compiler Warnings" />
    
    
    <figcaption>
        <h5 class=figure >FEI Device Compiler Warnings</h5>
        
    </figcaption>
    
</figure>



</p>

<p>There are five functions that contain a default implementation that should be modified to match the desired behavior. These functions are <code>constructor</code>, <code>deviceEnable</code>, <code>deviceDisable</code>, <code>deviceSetTuning</code>, and <code>deviceDeleteTuning</code>. The <code>constructor</code> function is called when the device is instantiated. During allocation of an FEI device, <code>deviceSetTuning</code> is called and, if successful, <code>deviceEnable</code> is called. During deallocation, <code>deviceDisable</code> is called followed by a call to <code>deviceDeleteTuning</code>.</p>

<p>For scanners, the additional method <code>deviceSetTuningScan</code> must be modified to provide the scanner capability.</p></li>

<li><p>Add source code to allocate and setup a tuner channel.</p>

<p>The following table explains what is expected in each function/method.</p>

<div class="notices note" ><p>Each of the following functions have <code>fts</code> and <code>tuner_id</code> passed in as parameters. The <code>tuner_id</code> parameter specifies which tuner channel to operate on, and <code>fts</code> is a reference to the <a href="../../../../manual/appendices/fei/#status-elements">FEI tuner status</a> associated with the specified tuner channel. Additionally, <code>deviceSetTuning</code> has a parameter called <code>request</code>, which defines the parameters of the tuning request.</p>
</div>


<h5 id="functions-methods-in-the-generated-code">Functions/methods in the generated code</h5>

<table>
<thead>
<tr>
<th align="left"><strong>Function/Method</strong></th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>constructor</code></td>
<td align="left">This is the REDHAWK constructor. All properties are initialized prior to this function being invoked. The default behavior when implementing a tuner is to create 1 RX_DIGITIZER channel.</td>
</tr>

<tr>
<td align="left"><code>deviceEnable</code></td>
<td align="left">Command the hardware to enable the output and begin generating data. The FEI tuner status element <code>fts.enabled</code> is updated to reflect the current state of the tuner output. This is a good place to call <code>start</code> to start the service function.</td>
</tr>

<tr>
<td align="left"><code>deviceDisable</code></td>
<td align="left">Command the hardware to disable the output and stop generating data. The FEI tuner status element <code>fts.enabled</code> is updated to reflect the current state of the tuner output. This is a good place to call <code>stop</code> to start the service function.</td>
</tr>

<tr>
<td align="left"><code>deviceSetTuning</code></td>
<td align="left">When an allocation is requested against the FEI device, the base class checks to see which tuners are currently available that match the tuner type (for example, <code>RX_DIGITIZER</code>) and that are currently not set. The base class cycles through this list of available tuners by calling <code>deviceSetTuning</code> with a tuner as an argument for the callback. The search is broken when <code>deviceSetTuning</code> returns true. For example, if there are ten available tuners, <code>deviceSetTuning</code> could potentially be called ten times. The tuner is unset when a successful allocation is deallocated; <code>deviceDeleteTuning</code> is the notification that a particular tuner has been deallocated. <br> There are several helper functions (<code>validateRequest</code>, <code>validateRequestVsSRI</code>, <code>validateRequestVsRFInfo</code>, and <code>validateRequestVsDevice</code>) provided in the inherited <code>FrontendTunerDevice</code> class of the device to assist in validation. Then, either configure the hardware with the tuner request, throw a <code>BadParameterException</code> if the request is outside of the capabilities of the tuner, or return false. Update the appropriate FEI tuner status elements (i.e. <code>fts.center_frequency</code>, <code>fts.bandwidth</code>, <code>fts.sample_rate</code>) with the actual values queried from the hardware rather than with the requested values. Push new Signal Related Information (SRI) within this function. Finally, when using the multi-out capability for Bulk Input/Output (BulkIO) ports, it is recommended that the <code>matchAllocationIdToStreamId</code> function be called at this point with the stream ID and Allocation id. Return <code>True</code> upon successful configuration of the tuner according to the request, or <code>False</code> otherwise.</td>
</tr>
</tbody>
</table>

<h5 id="additional-functions-methods-in-the-generated-scanner-code">Additional functions/methods in the generated scanner code</h5>

<table>
<thead>
<tr>
<th align="left"><strong>Function/Method</strong></th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>deviceSetTuningScan</code></td>
<td align="left">Called instead of <code>deviceSetTuning</code> when a scanner allocation is made. If the allocation does not contain an accompanying scanning allocation, the function deviceSetTuning is called instead.</td>
</tr>
</tbody>
</table>

<p>In addition to the code required for allocation and deallocation, information used to identify the target device at run-time must be added to the main class. The recommended method for dynamically identifying a target device is through configuration of a property. For example, configuring a property with an IP address or some other unique identifier allows the FEI device to identify the specific target device.</p></li>

<li><p>Add source code to interact with the target hardware.</p>

<p>There are two key aspects to an FEI device: 1) how many channels does it support? and 2) how does it interact with the hardware?</p>

<p>In an FEI device, the number of channels is set through the <code>setNumChannels</code> function. By default, this function is included in the generated code with 1 channel. Interaction with the hardware is, obviously, specific to the hardware. The nature of the hardware (i.e.: receiver, transmitter), is specified for the supported channels as the second argument in the <code>setNumChannels</code> function. For more information, refer to <a href="../../../../manual/appendices/fei/#types-of-tuners">Types of Tuners</a>. By default, <code>setNumChannels</code> is populated with RX_DIGITIZER, irrespective of the selections made on the FEI wizard.</p>

<p>The other aspect of the interaction with hardware is the interaction with the actual driver code. While this interaction is hardware-specific, there are some structures that may be useful. The loop function (<code>serviceFunction</code> in C++ and Java, <code>process</code> in Python), is iteratively called after the device is started. As part of the <code>deviceEnable</code> callback, calling <code>start</code> on the device starts processing loop. Conversely, as part of the <code>deviceDisable</code> callback, calling the <code>stop</code> on the device stops the processing loop.</p>

<div class="notices note" ><p>The tuner interface provides the ability to set parameters like center frequency and bandwith for the receiver. Any FEI compliant device may not output any data until the transients from any receiver setting change have settled to steady state. In short, all data output from an FEI compliant device must correspond to unambiguous receiver settings.</p>
</div>


<p>In the service loop function, the implementation of, in the case of a receiver, reading data from the hardware and pushing it out a port would exist. Conversely, in the case of the transmitter, the service loop function would be used to retrieve data from a port and push it through the driver to the hardware.</p></li>

<li><p>Add source code to implement FEI-related port functions.</p>

<div class="notices note" ><p>If using an <code>RFInfo</code> port, it may be useful to store the <code>RFInfo</code> packet as part of the device because it is not stored within the port.</p>
</div>


<p>For each function on a port definition, a callback is created in the device. This callback takes as arguments the same argument list that is provided by the port function with the exception of the types for the arguments. Where possible, the type for each of the arguments is a C++ type that is easier to use than the corresponding CORBA type. For example, in the case of a string argument, the argument on the port is of type char*, while the argument on the callback is of type std::string&amp;. A thorough description of the different port functions is available in <a href="../../../../manual/appendices/fei/#command-and-control">the FEI description</a>.</p></li>
</ol>

<h6 id="scanning-tuners-in-c">Scanning Tuners in C++</h6>

<p>The scanning tuner can take one of three strategies: manual, span, and discrete. These strategies have been mapped to the C++ device implementation as a set of classes, all inheriting from the ScanStrategy class. Creating a strategy requires instantiating one of these classes. For example, to create a span strategy with a single range from 1 MHz to 1.1 MHz in 10 kHz steps, use the following code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">frontend<span style="color:#f92672">::</span>ScanSpanRanges ranges;
frontend<span style="color:#f92672">::</span>ScanSpanRange range;
range.begin_frequency <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e6</span>;
range.end_frequency <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.1e6</span>;
range.step <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e4</span>;
ranges.push_back(range);
frontend<span style="color:#f92672">::</span>SpanStrategy strat(ranges);</code></pre></div>
<p>The scan status structure takes ownership of whatever strategy structure it is given. To deal with this issue, strategies can be cloned; the clone function returns a pointer to a new instance of the same strategy. The following example shows how to create a scan status structure with the strategy defined above:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">frontend<span style="color:#f92672">::</span>ScanStatus status(strat.clone());</code></pre></div>
<p>This code is applicable to callbacks for the scanning support functions of the DigitialScanningTuner port such as getScanStatus and setScanStrategy.</p>

<h4 id="installing-the-fei-device">Installing the FEI Device</h4>

<p>To install the FEI device, build the project and export it to the <a href="../../../../manual/glossary/#target-sdr">Target SDR</a>. After the FEI device is installed, you can use it in a REDHAWK system.</p>

<h4 id="test-running-a-sample-fei-device">Test-running a Sample FEI Device</h4>

<p>Create a new FEI project following the steps shown in <a href="#using-the-fei-wizard-to-create-an-fei-device">Using the FEI Wizard to Create an FEI Device</a>. For the purposes of this example, select Python as the language for the device and <code>dataShort</code> as the type for the digital output, otherwise select the defaults on the Wizard for all other settings. Follow steps 1 and 2 in <a href="#generating-and-customizing-the-source-code">Generating and Customizing the Source Code</a>.</p>

<p>In the <code>deviceEnable</code> function, add the following line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">self<span style="color:#f92672">.</span>start()</code></pre></div>
<p>In the <code>deviceDisable</code> function, add the following line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">self<span style="color:#f92672">.</span>stop()</code></pre></div>
<p>In the <code>process</code> function, add the following lines:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">data <span style="color:#f92672">=</span> range(<span style="color:#ae81ff">10000</span>)
self<span style="color:#f92672">.</span>port_dataShort_out<span style="color:#f92672">.</span>pushPacket(data, bulkio<span style="color:#f92672">.</span>timestamp<span style="color:#f92672">.</span>now(), False, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;my stream id&#34;</span>)</code></pre></div>
<p><a href="#installing-the-fei-device">Install</a> and <a href="../../../../manual/sandbox/ide/#launching-devices-in-the-ide-sandbox">launch</a> the device.</p>

<p>To test-run the device, follow these steps:</p>

<ol>
<li><p>In the <strong><a href="../../../../manual/glossary/#redhawk-explorer">REDHAWK Explorer</a></strong> tab, expand the <strong><a href="../../../../manual/glossary/#sandbox">Sandbox</a></strong> item.</p></li>

<li><p>In the <strong>Sandbox</strong> item, expand the <strong><a href="../../../../manual/glossary/#device-manager">Device Manager</a></strong> item. The devices running in the Sandbox are displayed.</p></li>

<li><p>Right-click the device’s output Port (probably called <code>dataShort_out</code>) and select <strong>Plot Port Data</strong>.</p></li>

<li><p>Right-click the running device and and select <strong>Allocate</strong>. The <strong>Allocate Tuner</strong> wizard is displayed.

<figure >
    
        <img src="../../images/TunerAllocationPage.png" alt="Allocate Tuner Wizard" />
    
    
    <figcaption>
        <h5 class=figure >Allocate Tuner Wizard</h5>
        
    </figcaption>
    
</figure>



</p></li>

<li><p>Enter any arbitrary number in the <strong>Center Frequency</strong>, <strong>Bandwidth</strong>, and <strong>Sample Rate</strong> fields.</p></li>

<li><p>To have the wizard perform the allocation as a background job, check the Run in background checkbox. If this checkbox is not checked, the wizard does not close until the allocation is complete.</p></li>

<li><p>Click <strong>Finish</strong>. Data is plotted on the plot.</p></li>

<li><p>To stop the flow, right-click the device under the <strong>Device Manager</strong> item and select <strong>Deallocate All</strong>. A deallocation warning message is displayed.</p></li>

<li><p>Click <strong>Yes</strong> to confirm that you want to deallocate all.</p></li>
</ol>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="../../../../manual/devices/interacting-with-hardware/" title="Using Devices to Interact with Hardware"> <i class="fa fa-chevron-left"></i><label>Using Devices to Interact with Hardware</label></a>
    <a class="nav nav-next" href="../../../../manual/devices/interacting-with-hardware/interacting-fei-device-python-package/" title="Interacting with an FEI Device with the Python Package" style="margin-right: 0px;"><label>Interacting with an FEI Device with the Python Package</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="../../../../js/clipboard.min.js"></script>

<link href="../../../../css/featherlight.min.css" rel="stylesheet">
<script src="../../../../js/featherlight.min.js"></script>



<script src="../../../../theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>